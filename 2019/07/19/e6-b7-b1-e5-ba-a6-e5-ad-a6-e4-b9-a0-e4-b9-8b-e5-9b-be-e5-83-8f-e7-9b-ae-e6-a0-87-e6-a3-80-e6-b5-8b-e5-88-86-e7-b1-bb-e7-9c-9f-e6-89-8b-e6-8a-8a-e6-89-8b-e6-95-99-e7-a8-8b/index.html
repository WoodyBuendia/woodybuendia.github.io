<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>深度学习之图像目标检测分类-真手把手教程 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="0.吐槽 本人python零基础（16年就买了py学习手册一直没看完），深度学习零基础（17年买的花书翻了三页纸），突发奇想（领导要求），上马深度学习图像分类，三天时间跑起来python识别图像并对图片内容进行识别和框选分类。 吐槽：都说Python编程简洁，python的宗旨是：优美胜于丑陋、明了胜于晦涩、简洁胜于复杂、复杂胜于凌乱…..可是python的安装和各种编译器、各种库、各种pip、p">
<meta property="og:type" content="article">
<meta property="og:title" content="深度学习之图像目标检测分类-真手把手教程">
<meta property="og:url" content="http://yoursite.com/2019/07/19/e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="0.吐槽 本人python零基础（16年就买了py学习手册一直没看完），深度学习零基础（17年买的花书翻了三页纸），突发奇想（领导要求），上马深度学习图像分类，三天时间跑起来python识别图像并对图片内容进行识别和框选分类。 吐槽：都说Python编程简洁，python的宗旨是：优美胜于丑陋、明了胜于晦涩、简洁胜于复杂、复杂胜于凌乱…..可是python的安装和各种编译器、各种库、各种pip、p">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image.jpeg">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-27-1024x504.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-26-1024x423.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-28-1024x616.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-29-1024x476.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-31-1024x229.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-35-1024x582.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-34-1024x237.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-30-1024x554.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-36-1024x460.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-37-562x1024.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-38-1024x447.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-39-1024x386.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-40-1024x598.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-41-1024x136.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image-42-1024x447.png">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/laiy-det.jpg">
<meta property="og:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/oldman-det.jpg">
<meta property="article:published_time" content="2019-07-19T06:30:05.000Z">
<meta property="article:modified_time" content="2020-06-18T07:47:34.375Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="python">
<meta property="article:tag" content="pytorch">
<meta property="article:tag" content="图像目标检测">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://woodybuendia.site/wp-content/uploads/2019/07/image.jpeg">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
<meta name="generator" content="Hexo 4.2.1"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">John Doe</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/Home">博客首页</a></li>
                        
                            <li><a href="/works">作品展示</a></li>
                        
                            <li><a href="/about">留言打卡</a></li>
                        
                            <li><a href="/FrontEndGuide">前端导航</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/luuman" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="#" title="weibo">weibo</a>
                            
                                <a class="fl google" target="_blank" href="#" title="google">google</a>
                            
                                <a class="fl twitter" target="_blank" href="#" title="twitter">twitter</a>
                            
                                <a class="fl linkedin" target="_blank" href="#" title="linkedin">linkedin</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/CST/" style="font-size: 10px;">CST</a> <a href="/tags/HFSS/" style="font-size: 10px;">HFSS</a> <a href="/tags/HFSS-Matlab-API/" style="font-size: 20px;">HFSS-Matlab API</a> <a href="/tags/RFID/" style="font-size: 10px;">RFID</a> <a href="/tags/antenna-magus/" style="font-size: 10px;">antenna magus</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/pytorch/" style="font-size: 10px;">pytorch</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 10px;">优化</a> <a href="/tags/%E5%9B%BE%E5%83%8F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" style="font-size: 10px;">图像目标检测</a> <a href="/tags/%E5%A4%A9%E7%BA%BF/" style="font-size: 20px;">天线</a> <a href="/tags/%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">工作笔记</a> <a href="/tags/%E7%94%B5%E6%A1%A5/" style="font-size: 10px;">电桥</a> <a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">记录</a> <a href="/tags/%E8%B5%84%E6%BA%90/" style="font-size: 10px;">资源</a> <a href="/tags/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95/" style="font-size: 10px;">遗传算法</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">纯海迷、爱运动、爱交友、爱旅行、喜欢接触新鲜事物、迎接新的挑战，更爱游离于错综复杂的编码与逻辑中</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">John Doe</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">John Doe</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/Home">博客首页</a></li>
                
                    <li><a href="/works">作品展示</a></li>
                
                    <li><a href="/about">留言打卡</a></li>
                
                    <li><a href="/FrontEndGuide">前端导航</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/luuman" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
                    
                        <a class="google" target="_blank" href="#" title="google">google</a>
                    
                        <a class="twitter" target="_blank" href="#" title="twitter">twitter</a>
                    
                        <a class="linkedin" target="_blank" href="#" title="linkedin">linkedin</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/19/e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b/" class="article-date">
      <time datetime="2019-07-19T06:30:05.000Z" itemprop="datePublished">2019-07-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      深度学习之图像目标检测分类-真手把手教程
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E4%BA%92%E8%81%94%E7%BD%91/">计算机与互联网</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pytorch/" rel="tag">pytorch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">图像目标检测</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><strong>0.吐槽</strong></p>
<p>本人python零基础（16年就买了py学习手册一直没看完），深度学习零基础（17年买的花书翻了三页纸），突发奇想（领导要求），上马深度学习图像分类，三天时间跑起来python识别图像并对图片内容进行识别和框选分类。</p>
<p>吐槽：都说Python编程简洁，python的宗旨是：<strong>优美胜于丑陋、明了胜于晦涩、简洁胜于复杂、复杂胜于凌乱</strong>…..可是python的安装和各种编译器、各种库、各种pip、pip3、conda、wheel完全就把我弄昏了头。好不容易装起来了，又是各种路径、环境、配置乱七八糟各种问题，日了狗了。。真还不如MATLAB来的简单。。。好了吐槽归吐槽，本文让你从小白到运行py如飞。</p>
<h2 id="1-清单"><a href="#1-清单" class="headerlink" title="1.清单"></a>1.清单</h2><p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image.jpeg" alt=""></p>
<p>为避免文章冗长无章，先把所需清单和背景知识列举一下。</p>
<p>关键参考文献：<a href="https://towardsdatascience.com/object-detection-and-tracking-in-pytorch-b3cf1a696a98" target="_blank" rel="noopener">Object detection and tracking in PyTorch</a>，原作者简介： <em>Chris Fotache is an AI researcher with <em>[</em>CYNET.ai_](<a href="http://www.cynet.ai/" target="_blank" rel="noopener">http://www.cynet.ai/</a>)</em> based in New Jersey. He covers topics related to artificial intelligence in our life, Python programming, machine learning, computer vision, natural language processing and more._</p>
<p>该文章中英文对照 <strong><a href="https://ai.yanxishe.com/page/TextTranslation/1333" target="_blank" rel="noopener">用PyTorch来做物体检测和追踪</a></strong><a href="https://ai.yanxishe.com/page/TextTranslation/1333" target="_blank" rel="noopener"></a></p>
<p>所需软件：python3.7、Anaconda</p>
<p>本来用的是PyCharm作为编辑器，Anaconda为python库环境，但是PyCharm使用的时候总是遇到问题，后面在Anaconda里面也找到了python的命令行窗口，总算把程序跑起来了。</p>
<p>运行平台：windows 10</p>
<h2 id="2-安装和下载"><a href="#2-安装和下载" class="headerlink" title="2.安装和下载"></a>2.安装和下载</h2><h3 id="2-1-安装python"><a href="#2-1-安装python" class="headerlink" title="2.1 安装python"></a>2.1 安装python</h3><p>打开python官网，下载win平台最新版3.7，</p>
<p><a href="https://www.python.org/downloads/windows/" target="_blank" rel="noopener">https://www.python.org/downloads/windows/</a></p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-27-1024x504.png" alt=""></p>
<p>安装python，需要注意的是，勾选添加至系统路径。</p>
<h3 id="2-2-安装anaconda"><a href="#2-2-安装anaconda" class="headerlink" title="2.2 安装anaconda"></a>2.2 安装anaconda</h3><p>Anaconda安装文件较大，下载安装。Anaconda 是一个管理python的库的平台，众所周知，python之所以强大，是因为有各种库。需要什么功能，首先寻找有没有库，这也导致了python的库版本众多，管理困难，开发环境混乱。</p>
<p><a href="https://www.anaconda.com/distribution/" target="_blank" rel="noopener">https://www.anaconda.com/distribution/</a></p>
<p>下载链接</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-26-1024x423.png" alt=""></p>
<h3 id="2-3-下载文件"><a href="#2-3-下载文件" class="headerlink" title="2.3 下载文件"></a>2.3 下载文件</h3><p>根据 参考文献：<a href="https://towardsdatascience.com/object-detection-and-tracking-in-pytorch-b3cf1a696a98" target="_blank" rel="noopener">Object detection and tracking in PyTorch</a>， 下载所需文件，下载地址为GitHub：<a href="https://github.com/cfotache/pytorch_objectdetecttrack" target="_blank" rel="noopener">https://github.com/cfotache/pytorch_objectdetecttrack</a></p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-28-1024x616.png" alt=""></p>
<p>下载权重文件 yolov3.weights （236MB）， 将该文件放入config文件夹中，下载地址：<a href="https://pjreddie.com/media/files/yolov3.weights" target="_blank" rel="noopener">https://pjreddie.com/media/files/yolov3.weights</a></p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-29-1024x476.png" alt=""></p>
<h3 id="2-4-安装python库"><a href="#2-4-安装python库" class="headerlink" title="2.4 安装python库"></a>2.4 安装python库</h3><p>所需库：pytorch、opencv、matplotlib</p>
<p>运行Anaconda Prompt</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-31-1024x229.png" alt=""></p>
<p>在Pytorch官网选择自己的版本和平台，找到相应安装的命令。</p>
<p><a href="https://pytorch.org/" target="_blank" rel="noopener">https://pytorch.org/</a></p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-35-1024x582.png" alt=""></p>
<p>我这里选择python3.7 ，conda安装，无CPU版。</p>
<p>在打开的 Anaconda Prompt 中输入下面命令安装pytorch</p>
<pre><code>conda install pytorch-cpu torchvision-cpu -c pytorch</code></pre><p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-34-1024x237.png" alt=""></p>
<p>在Anaconda Prompt中输入：<code>conda install matplotlib</code>安装matplot库</p>
<p>打开Anaconda Navigator</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-30-1024x554.png" alt=""></p>
<p>左侧选择Environment</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-36-1024x460.png" alt=""></p>
<p>搜索opencv，会出来三个，勾选后点击右下角的apply安装。</p>
<p>注意：如果勾选后选择安装出现错误，那么在creat中新建一个环境</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-37-562x1024.png" alt=""></p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-38-1024x447.png" alt=""></p>
<p>我的就报错了，新建了一个名为opencv的环境，注意，这个环境与默认的base环境是独立的，之前安装的pytorch和matplot都还需要在安装一边。</p>
<p>由于anaconda环境不同，在anaconda prompt中，输入：</p>
<pre><code>activate opencv (此处是你新建的环境名称)</code></pre><p>切换到新环境之后，重新安装 pytorch和matplot</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-39-1024x386.png" alt=""></p>
<h2 id="3-物体检测代码Object-Detection-in-Images"><a href="#3-物体检测代码Object-Detection-in-Images" class="headerlink" title="3 物体检测代码Object Detection in Images"></a>3 物体检测代码Object Detection in Images</h2><p>在从GitHub下载到的文件夹，名为：pytorch_objectdetecttrack-master，中新建python脚本：test.py</p>
<h3 id="3-1脚本"><a href="#3-1脚本" class="headerlink" title="3.1脚本"></a>3.1脚本</h3><p>输入以下代码：</p>
<pre><code>from models import *
from utils import *
import os, sys, time, datetime, random
import torch
from torch.utils.data import DataLoader
from torchvision import datasets, transforms
from torch.autograd import Variable
import matplotlib.pyplot as plt
import matplotlib.patches as patches
from PIL import Image

config_path=&apos;config/yolov3.cfg&apos;
weights_path=&apos;config/yolov3.weights&apos;
class_path=&apos;config/coco.names&apos;
img_size=416
conf_thres=0.8
nms_thres=0.4
# Load model and weights
model = Darknet(config_path, img_size=img_size)
model.load_weights(weights_path)
model.cuda()
#model.cpu()

model.eval()
classes = utils.load_classes(class_path)
Tensor = torch.cuda.FloatTensor

def detect_image(img):
    # scale and pad image
    ratio = min(img_size/img.size[0], img_size/img.size[1])
    imw = round(img.size[0] * ratio)
    imh = round(img.size[1] * ratio)
    img_transforms=transforms.Compose([transforms.Resize((imh,imw)),
         transforms.Pad((max(int((imh-imw)/2),0),
              max(int((imw-imh)/2),0), max(int((imh-imw)/2),0),
              max(int((imw-imh)/2),0)), (128,128,128)),
         transforms.ToTensor(),
         ])
    # convert image to Tensor
    image_tensor = img_transforms(img).float()
    image_tensor = image_tensor.unsqueeze_(0)
    input_img = Variable(image_tensor.type(Tensor))
    # run inference on the model and get detections
    with torch.no_grad():
        detections = model(input_img)
        detections = utils.non_max_suppression(detections, 80,
                        conf_thres, nms_thres)
    return detections[0]

# load image and get detections
img_path = &quot;images/blueangels.jpg&quot;

prev_time = time.time()
img = Image.open(img_path)
detections = detect_image(img)
inference_time = datetime.timedelta(seconds=time.time() - prev_time)
print (&apos;Inference Time: %s&apos; % (inference_time))
# Get bounding-box colors
cmap = plt.get_cmap(&apos;tab20b&apos;)
colors = [cmap(i) for i in np.linspace(0, 1, 20)]
img = np.array(img)
plt.figure()
fig, ax = plt.subplots(1, figsize=(12,9))
ax.imshow(img)
pad_x = max(img.shape[0] - img.shape[1], 0) * (img_size / max(img.shape))
pad_y = max(img.shape[1] - img.shape[0], 0) * (img_size / max(img.shape))
unpad_h = img_size - pad_y
unpad_w = img_size - pad_x
if detections is not None:
    unique_labels = detections[:, -1].cpu().unique()
    n_cls_preds = len(unique_labels)
    bbox_colors = random.sample(colors, n_cls_preds)
    # browse detections and draw bounding boxes
    for x1, y1, x2, y2, conf, cls_conf, cls_pred in detections:
        box_h = ((y2 - y1) / unpad_h) * img.shape[0]
        box_w = ((x2 - x1) / unpad_w) * img.shape[1]
        y1 = ((y1 - pad_y // 2) / unpad_h) * img.shape[0]
        x1 = ((x1 - pad_x // 2) / unpad_w) * img.shape[1]
        color = bbox_colors[int(np.where(
             unique_labels == int(cls_pred))[0])]
        bbox = patches.Rectangle((x1, y1), box_w, box_h,
             linewidth=2, edgecolor=color, facecolor=&apos;none&apos;)
        ax.add_patch(bbox)
        plt.text(x1, y1, s=classes[int(cls_pred)],
                color=&apos;white&apos;, verticalalignment=&apos;top&apos;,
                bbox={&apos;color&apos;: color, &apos;pad&apos;: 0})
plt.axis(&apos;off&apos;)
# save image
plt.savefig(img_path.replace(&quot;.jpg&quot;, &quot;-det.jpg&quot;),
                  bbox_inches=&apos;tight&apos;, pad_inches=0.0)
plt.show()</code></pre><h3 id="3-2-运行python"><a href="#3-2-运行python" class="headerlink" title="3.2 运行python"></a>3.2 运行python</h3><p>在打开的Anaconda Navigator中，选择环境，点击三角形箭头，在菜单中选择open with python</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-40-1024x598.png" alt=""></p>
<p>输入import torch，导入模块；</p>
<p>输入torch.cuda.is_available()，测试计算机是否有显卡。</p>
<p><strong>讲道理pytorch是支持无显卡，纯CPU模式的，但是需要改代码，我不会，下载到的这个代码是GPU模式的。。好在我的笔记本有显卡，虽然很破，但是不会报错。另外，一般讲道理这里不应该通过anaconda来运行python的，而是通过PyCharm来编辑py代码和运行的。但是我的pycharm运行显卡测试时，总是Fase，换成anaconda打开的python，就显示Ture。这可能和笔记本的独显和集显有关。</strong></p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-41-1024x136.png" alt=""></p>
<h3 id="3-3切换工作目录"><a href="#3-3切换工作目录" class="headerlink" title="3.3切换工作目录"></a>3.3切换工作目录</h3><p>把通过anaconda启动的python命令行的工作目录切换到保存pytorch_objectdetecttrack-master的目录</p>
<p>输入：import os</p>
<p>输入：os.getcwd() 获取当前工作目录</p>
<p>输入os.chdir(‘’) 改变工作目录，我这里输入</p>
<pre><code>import os
os.chdir(&apos;D:/Python/pytorch_objectdetecttrack-master/pytorch_objectdetecttrack-master/&apos;)</code></pre><h3 id="3-4运行代码"><a href="#3-4运行代码" class="headerlink" title="3.4运行代码"></a>3.4运行代码</h3><p>在命令行输入：exec(open(‘test.py’).read()) 来执行test.py，即可检测图片中的物体。</p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/image-42-1024x447.png" alt=""></p>
<h2 id="4效果"><a href="#4效果" class="headerlink" title="4效果"></a>4效果</h2><p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/laiy-det.jpg" alt=""></p>
<p><img src="http://woodybuendia.site/wp-content/uploads/2019/07/oldman-det.jpg" alt=""></p>

      
      
        <div class="page-reward">
          <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang">赏</a></p>
          <div class="hide_box"></div>
          <div class="shang_box">
            <a class="shang_close" href="javascript:void(0)" onclick="dashangToggle()">×</a>
            <div class="shang_tit">
              <p>纯属好玩</p>
            </div>
            <div class="shang_payimg">
              <img src="/img/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
            </div>
              <div class="pay_explain">扫码打赏，你说多少就多少</div>
            <div class="shang_payselect">
              
                <div class="pay_item checked" data-id="alipay">
                  <span class="radiobox"></span>
                  <span class="pay_logo"><img src="/img/alipay.png" alt="支付宝" /></span>
                </div>
              
              
                <div class="pay_item" data-id="wechat">
                  <span class="radiobox"></span>
                  <span class="pay_logo"><img src="/img/weixin.png" alt="微信" /></span>
                </div>
              
            </div>
            <div class="shang_info">
              <p>打开<span id="shang_pay_txt">支付宝</span>扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
        <script type="text/javascript">
          $(".pay_item").click(function(){
            $(this).addClass('checked').siblings('.pay_item').removeClass('checked');
            var dataid=$(this).attr('data-id');
            $(".shang_payimg img").attr("src","/img/"+dataid+"img.jpg");
            $("#shang_pay_txt").text(dataid=="alipay"?"支付宝":"微信");
          });
          function dashangToggle(){
            
            $(".hide_box").fadeToggle();
            $(".shang_box").fadeToggle();
          }
        </script>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2019/07/19/e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b/">深度学习之图像目标检测分类-真手把手教程</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 John Doe 的个人博客">John Doe</a></p>
        <p><span>发布时间:</span>2019年07月19日 - 14时30分</p>
        <p><span>最后更新:</span>2020年06月18日 - 15时47分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2019/07/19/e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b/" title="深度学习之图像目标检测分类-真手把手教程">http://yoursite.com/2019/07/19/e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b/</a>
            <span class="copy-path" data-clipboard-text="原文: http://yoursite.com/2019/07/19/e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b/　　作者: John Doe" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2019/08/19/e5-b8-b8-e7-94-a8-e7-94-b5-e7-a3-81-e4-bb-bf-e7-9c-9f-e8-bd-af-e4-bb-b6/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          常用电磁仿真软件
        
      </div>
    </a>
  
  
    <a href="/2019/07/18/antenna-magus-pro-2019/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Antenna Magus Pro 2019 V9.2</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-清单"><span class="toc-number">1.</span> <span class="toc-text">1.清单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-安装和下载"><span class="toc-number">2.</span> <span class="toc-text">2.安装和下载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-安装python"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 安装python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-安装anaconda"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 安装anaconda</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-下载文件"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 下载文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-安装python库"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 安装python库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-物体检测代码Object-Detection-in-Images"><span class="toc-number">3.</span> <span class="toc-text">3 物体检测代码Object Detection in Images</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1脚本"><span class="toc-number">3.1.</span> <span class="toc-text">3.1脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-运行python"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 运行python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3切换工作目录"><span class="toc-number">3.3.</span> <span class="toc-text">3.3切换工作目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4运行代码"><span class="toc-number">3.4.</span> <span class="toc-text">3.4运行代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4效果"><span class="toc-number">4.</span> <span class="toc-text">4效果</span></a></li></ol>
</div>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">


<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>

<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>





<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
        <div id="gitments"></div>
<script src="/js/gitment.browser.js"></script>
<script>
    var gitment = new Gitment({
      id: window.location.pathname,
      owner: 'luuman',
      repo: 'luuman.github.io',
      oauth: {
        client_id: '',
        client_secret: '',
      },
    })
    gitment.render('gitments')
</script>
    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2019/08/19/e5-b8-b8-e7-94-a8-e7-94-b5-e7-a3-81-e4-bb-bf-e7-9c-9f-e8-bd-af-e4-bb-b6/" title="上一篇: 常用电磁仿真软件">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2019/07/18/antenna-magus-pro-2019/" title="下一篇: Antenna Magus Pro 2019 V9.2">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/06/18/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/21/e7-bd-91-e7-ab-99-e5-85-ac-e5-91-8a-ef-bc-9a-e5-80-92-e8-ae-a1-e6-97-b668-e5-a4-a9-e8-bf-81-e7-a7-bb-e6-88-96-e5-85-b3-e7-ab-99/">网站公告：倒计时68天迁移或关站</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/23/e3-80-90matlab-hfss-api-e3-80-91-e9-81-87-e5-88-b0-e9-97-ae-e9-a2-98-e8-af-a5-e5-a6-82-e4-bd-95-e8-a7-a3-e5-86-b3/">【MATLAB HFSS API】遇到问题该如何解决</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/23/e3-80-90-e8-a7-a3-e5-86-b3-e5-8a-9e-e6-b3-95-e3-80-91win10-e5-8d-8e-e7-a1-95-e7-ac-94-e8-ae-b0-e6-9c-ac-e9-9f-b3-e9-a2-91-e6-9c-8d-e5-8a-a1-e6-9c-aa-e5-93-8d-e5-ba-94-e6-88-96-e8-80-85-e6-92-ad/">【解决办法】win10华硕笔记本音频服务未响应或者播放失败请切换输出设备</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/07/e5-a4-a9-e7-ba-bf-e9-98-b5-e5-88-97-e6-97-81-e7-93-a3-e7-9a-84-e6-8a-91-e5-88-b6/">天线阵列旁瓣的抑制</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/07/e6-88-91-e7-9a-84-e7-ac-ac-e4-b8-80-e4-b8-aapyhton-e7-a8-8b-e5-ba-8f-ef-bc-9a-e9-80-9a-e8-bf-87-e7-99-be-e5-ba-a6-e5-9c-b0-e5-9b-beapi-e8-87-aa-e5-8a-a8-e6-9f-a5-e8-af-a2-e8-b7-af-e5-86-b5/">我的第一个Pyhton程序：通过百度地图API自动查询路况</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/04/e6-9d-82-e8-b0-88-e8-af-bb-e4-b9-a6/">杂谈-读书</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/19/e5-b8-b8-e7-94-a8-e7-94-b5-e7-a3-81-e4-bb-bf-e7-9c-9f-e8-bd-af-e4-bb-b6/">常用电磁仿真软件</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/19/e6-b7-b1-e5-ba-a6-e5-ad-a6-e4-b9-a0-e4-b9-8b-e5-9b-be-e5-83-8f-e7-9b-ae-e6-a0-87-e6-a3-80-e6-b5-8b-e5-88-86-e7-b1-bb-e7-9c-9f-e6-89-8b-e6-8a-8a-e6-89-8b-e6-95-99-e7-a8-8b/">深度学习之图像目标检测分类-真手把手教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/18/antenna-magus-pro-2019/">Antenna Magus Pro 2019 V9.2</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/18/ansys-hfss-e4-bc-98-e5-8c-96-e5-b7-a5-e5-85-b7-e7-ae-b1-e7-9a-84-e4-bd-bf-e7-94-a8-ef-bc-9a-e4-bb-a5-e8-80-a6-e5-90-88-e5-be-ae-e5-b8-a6-e7-ba-bf-e7-94-b5-e6-a1-a5-e4-b8-ba-e4-be-8b/">Ansys HFSS优化工具箱的使用：以耦合微带线电桥为例</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/18/cst-e4-bc-98-e5-8c-96-e5-b7-a5-e5-85-b7-e7-ae-b1-e7-9a-84-e4-bd-bf-e7-94-a8-e4-bb-a5-e5-88-86-e6-94-af-e7-ba-bf-e7-94-b5-e6-a1-a5-e7-9a-84-e4-bc-98-e5-8c-96-e4-b8-ba-e4-be-8b/">CST优化工具箱的使用-以分支线电桥的优化为例</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/15/e5-86-85-e7-bd-91-e7-a9-bf-e9-80-8ffrp-e4-bd-bf-e7-94-a8-e6-95-99-e7-a8-8b/">内网穿透frp部署记录总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/09/e7-bd-91-e7-ab-99-e7-bb-b4-e6-8a-a4-e8-ae-b0-e5-bd-95/">网站维护记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/09/cst-studio-suite-2019/">CST Studio Suite 2019</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/02/hfss-matlab-api-e4-bd-bf-e7-94-a8-e6-95-99-e7-a8-8b/">HFSS-MATLAB-API 使用教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/28/e5-bb-ba-e7-ab-99-e8-ae-b0-e5-bd-95/">建站记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/27/e5-88-a9-e7-94-a8-e7-bc-96-e7-a8-8b-e5-bf-ab-e9-80-9f-e7-94-9f-e6-88-90-e8-be-83-e5-a4-a7-e8-a7-84-e6-a8-a1-e5-8f-af-e9-87-8d-e6-9e-84-e9-98-b5-e5-88-97-e4-b8-8e-e7-bc-96-e8-be-91pin-e4-ba-8c/">利用编程快速生成较大规模可重构阵列与编辑PIN二极管状态——Part Ⅰ:生成</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/24/e3-80-90-e5-b7-a5-e4-bd-9c-e7-ac-94-e8-ae-b0-e3-80-91rfid-e7-b3-bb-e7-bb-9f-e5-b7-a5-e4-bd-9c-e5-8e-9f-e7-90-86-e4-b8-8e920mhz-e8-af-bb-e5-8d-a1-e5-99-a8-e5-a4-a9-e7-ba-bf-e8-ae-be-e8-ae-a1/">【工作笔记】RFID系统工作原理与920MHz读卡器天线设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/pdf-ef-bc-9aapplication-note-of-radar-sensing-and-detection-innosent-e8-b0-83-e9-a2-91-e8-bf-9e-e7-bb-ad-e6-b3-a2/">PDF：Application Note of Radar Sensing and Detection_Innosent_调频连续波</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/e6-af-ab-e7-b1-b3-e6-b3-a2-e6-97-a0-e7-ba-bf-e9-80-9a-e4-bf-a1-e8-8b-b1-e6-96-87-e5-8e-9f-e7-89-88-e3-80-8amillimeterwavewirelesscommunications-e3-80-8b/">毫米波无线通信英文原版《MillimeterWaveWirelessCommunications》</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/22/cst-studio-2018-e5-88-86-e5-b8-83-e5-bc-8f-e8-ae-a1-e7-ae-97distributed-computing-e9-83-a8-e7-bd-b2-e5-92-8c-e7-a0-b4-e8-a7-a3/">CST Studio 2018分布式计算(Distributed Computing)部署和破解</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/07/antenna-magus-pro-8-0-e5-92-8ccst-2018-e5-ae-89-e8-a3-85-e4-b8-8e-e7-a0-b4-e8-a7-a3/">Antenna Magus Pro 8.0和CST 2018安装与破解</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/05/e6-9c-8d-e5-8a-a1-e5-99-a8-e8-bf-9c-e7-a8-8b-e6-a1-8c-e9-9d-a2-e5-ae-89-e8-a3-85matlab-e5-87-ba-e7-8e-b0license-manager-error-103-e7-9a-84-e8-a7-a3-e5-86-b3-e5-8a-9e-e6-b3-95/">服务器远程桌面安装MATLAB出现License Manager Error -103的解决办法</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/05/e4-ba-8c-e3-80-87-e4-b8-80-e4-b9-9d-e5-b9-b4-e5-9b-9b-e6-9c-88-e4-ba-94-e6-97-a5-c2-b7-e6-b8-85-e6-98-8e/">二〇一九年四月五日·清明</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/07/e7-94-b5-e6-89-ab-e9-98-b5-e5-88-97-ef-bc-9amatlab-e5-bb-ba-e6-a8-a1-e4-b8-8e-e4-bb-bf-e7-9c-9f/">电扫阵列：MATLAB 建模与仿真</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/07/hello-world-1/">世界，您好！</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2020 John Doe
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>


<script src="/js/main.js"></script>


    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>